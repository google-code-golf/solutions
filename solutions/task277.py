p=lambda g,i=11:-i*g or p([*map(lambda*r,v=0:[v:=-~v*c*i|c%~c&3&~sum(g,g).count(c)for c in r][::-1],*g)],i-1)
# ----------------------------------------------------------------
# post-competition-diamond, base: golfers anonymous

p=lambda g,i=11:-i*g or p([[v:=c and[3-sum(g,g).count(c),~v*c][i>0]for c in[0]+r][:0:-1]for*r,in zip(*g)],i-1)
# ----------------------------------------------------------------
# post-competition-diamond, base: golfers anonymous

p=lambda g,k=-15,i=1:k*g or[[c%~c&(i:=[i*32,2-c%31*3//str(g).count("8")-(c%1247%728==4),c|i&c%~c][k//14])for c in[0]+r][:0:-1]for*r,in zip(*p(g,k+1))]
# ----------------------------------------------------------------
# post-competition-diamond, base: jailctf annotations

z=[0];p=lambda g,k=38,h=2,q=z*9:~k*g or p([q:=[v and[v%63,P|p|v,h:=h*64,v//sum(g,z).count(v)][k>>4]for P,p,v in zip(z+q,z+r,r)]for*r,in zip(*g[::-1])],k-1)
# ----------------------------------------------------------------
# oxjam
