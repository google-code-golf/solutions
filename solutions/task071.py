p=lambda g,*a:[[a*(v>0<r[~i+t])for i,v in enumerate(r)if a or{t:=i-r[::-1].index(a:=v)}]for r in g]
# ----------------------------------------------------------------
# post-comp-diamonds, base: logiclynx
