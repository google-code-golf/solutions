p=lambda g,i=11:g*-i or[*map(lambda*r,d=0:[d:=c+(c*d>0,(2&-d)%~c)[i>3]for c in r],*p(g,i-1)[::-1])]
# ----------------------------------------------------------------
# post-comp-diamonds, base: theoreticalsyntaxgolfers
