e=enumerate;p=lambda g:[[v[j]or any((l:=(m:=W%2*-~m)//2)>=I-i>~l<J-j<l*3for I,V in e(g)if(m:=1)for J,W in e(V))*3|any(w[:i])for j,w in e(zip(*g))]for i,v in e(g)]
# ----------------------------------------------------------------
# post-competition-diamond, base: theoreticalsyntaxgolfers
